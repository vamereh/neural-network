<HTML>
<HEAD>
<TITLE>Создание мира</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<LINK rel="stylesheet" href="css\style.css" type="text/css">
<SCRIPT src="script/buttonscript.js" language="JavaScript"></SCRIPT>
</HEAD>
<BODY>
<A name="begin"></A>
<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">
<TR>
	<TD colspan="2">
	<!--часть шапка н-->
	<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">
	<TR>
		<TD rowspan="2" bgcolor="#3B3B3B">
        	<P class="mainhead">
<!--Основной заголовок н-->
Программирование и внедрение нейросетей
<!--Основной заголовок к-->
			</P>
		</TD>
		<TD bgcolor="#3B3B3B" align="right" valign="top">
		<P class="t2">
<!--в шапке справа вверху н-->
<A href="search.htm" class="help"><IMG src="image/search_b.gif" width="16" height="16" border="0"> Поиск&nbsp;&nbsp;</A>
<A href="help.htm" class="help"><IMG src="image/question_b.gif" width="16" height="16" border="0"> Справка&nbsp;&nbsp;</A>

<!--в шапке справа вверху к-->
		</P>
		</TD>
	</TR>
	<TR>
		<TD bgcolor="#3B3B3B">
			<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">
			<TR>
				<TD width="166" height="38"><IMG src="image/1.gif" width="166" height="38" border="0"></TD>
				<TD width="100%" height="38" background="image/2.gif"><IMG src="image/2.gif" width="1" height="38" border="0"></TD>
				<TD width="157" height="38"><IMG src="image/3.gif" width="157" height="38" border="0"></TD>
				<TD bgcolor="#6A6A6A">
					<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">
					<TR>
						<TD width="100%" height="100%">
<!--в шапке маленькая надпись с права внизу н-->
<P class="t1">РГППУ</P>
<!--в шапке маленькая надпись с права внизу к-->
						<TD>
					</TR>
					<TR><TD width="100%" height="1" bgcolor="#3B3B3B"><IMG src="image/r1.gif" width="1" height="1" border="0"><TD></TR>
					</TABLE>
				</TD>
			</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD colspan="2" bgcolor="#626262"><IMG src="image/r2.gif" width="1" height="16" border="0"></TD>
	<TR>
	</TABLE>
	<!--часть шапка к-->
	</TD>
</TR>
<TR>
	<TD width="*" height="100%" bgcolor="#DFEDF6">
	<!--часть навигация н-->
	<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">

	<TR>
		<TD width="181" height="30"><IMG src="image/r3.gif" width="1" height="30" border="0"></TD>
		<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
	</TR>
<!--кнопки н-->
<!--
<TR>
	<TD width="181" height="30" background="image\b.gif" align="right" valign="middle">
	<P class="button_on"><NOBR>Начало</NOBR></P>
	</TD>
	<TD width="1" height="30" bgcolor="#FFFFFF"><IMG src="image/r5.gif" width="1" height="1" border="0"></TD>
</TR>
-->

<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="start.htm"><NOBR>Начало</NOBR></A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="create_proj.htm"><NOBR>Создание окна</NOBR></A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="cr_neronet.htm"><NOBR>Создание нейросети</NOBR></A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="initd3d.htm"><NOBR>Запуск Direct3D</NOBR></A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="crdelmod.htm"><NOBR>Визуализация</NOBR></A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="anim.htm">Анимация</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="kamera.htm">Камера</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="bma.htm">ВМА-файл</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="frommaxtox.htm">Экспорт модели</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" background="image\b.gif" align="right" valign="middle">
	<P class="button_on"><NOBR>Внедрение нейросети</NOBR></P>
	</TD>
	<TD width="1" height="30" bgcolor="#FFFFFF"><IMG src="image/r5.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle">
	<P class="button_on">&nbsp;</P>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="use_books.htm">Литература</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="ip.htm">Интерфейс пособия</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="metodukaz.htm">Методические указания</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>
<TR>
	<TD width="181" height="30" align="right" valign="middle" onmouseover="bgimageon(this)" onmouseout="bgimageof(this)">
	<A href="search.htm">Поиск по пособию</A>
	</TD>
	<TD width="1" height="30" bgcolor="#90B2D9"><IMG src="image/r4.gif" width="1" height="1" border="0"></TD>
</TR>

<!--кнопки к-->
	<TR>
		<TD width="181" height="100%"><IMG src="image/r3.gif" width="1" height="1" border="0"></TD>
		<TD width="1" height="100%"  bgcolor="#DFEDF6" valign="top"><IMG src="image/9.gif" width="1" height="161" border="0"></TD>
	</TR>
	<TR>
		<TD width="182" height="1"><IMG src="image/r3.gif" width="182" height="1" border="0"></TD>
	</TR>
	</TABLE>
	<!--часть навигация к-->
	</TD>
	<TD width="100%" height="100%">
	<!--часть содержания н-->
	<TABLE cellspacing="0" cellpadding="0" border="0" width="100%" height="100%" align="center">
	<TR>
		<TD align="justify" valign="top">
<!--содержание н-->


<TABLE cellspacing="5" cellpadding="0" border="0" width="*" height="*" align="center" style="margin-top:10px;">
	<TR>
		<TD><A href="impl_neronet.htm" class="wt">Подготовка</A></TD>
		<TD><A href="create_world.htm" class="wt">Создание мира</A></TD>
		<TD><A href="impl.htm" class="wt">Внедрение нейросети</A></TD>	
	</TR>
</TABLE>



<DIV class="layer_window">
<TABLE cellspacing="0" cellpadding="0" border="0" width="*" height="*" align="center" >
<TR>
	<TD width="5" height="23"><IMG src="image/5.gif" width="5" height="23" border="0"></TD>
	<TD width="*" height="23" background="image/4.gif">
		<TABLE cellspacing="0" cellpadding="0" border="0" width="*" height="*" align="center" >
		<TR>
			<TD width="100%" height="23" align="justify" valign="middle" >
<P class="head_window">Внедрение нейросети</P>
			</TD>
			<TD width="63" height="23"><IMG src="image/mini_b.gif" width="63" height="23" border="0"></TD>
		</TR>
		</TABLE>
	</TD>
	<TD width="5" height="23"><IMG src="image/6.gif" width="5" height="23" border="0"></TD>
<TR>
<TR>
	<TD width="5" height="44" valign="bottom"><IMG src="image/7.gif" width="5" height="44" border="0"></TD>
	<TD height="100%" align="justify" valign="top">
<!--текст окошка н-->

<P class="title2">2. Создание мира</P> 
<P class="text">
На протяжении всех лабораторных работ вы учились разрабатывать и обучать нейросеть, экспортировать и 
программировать трехмерную графику, программировать точку обзора (камеру) и многое другое. Для чего же 
все это нужно было? С одно стороны вы постигали новые знания и расширяли свой кругозор, но с другой стороны
 вы подготавливали части для своего итогового учебного проекта.
<P class="text">
В прошлой части («Подготовка») этой лабораторной работы вы подготавливали свой итоговый проект, перенося 
из других проектов, ранее выполненных, некоторые части, изменяли их, приводя к требуемому результату, 
который обычно заключался в качественном улучшении…
<P class="text">
Сейчас настал момент смоделировать окружающую среду, в которую в последующем вы поместите объекты (робо-пауков) 
управляемые созданной вами нейросетью. Без окружающей среды или мира вокруг ваших робо-пауков ничего не 
получиться, т.к. нейросети нечего будет анализировать, не будет денных, которые она сможет считать и 
интерпретировать.
<P class="text">
Во всех предыдущих лабораторных работах вы визуализировали на сцене всего одну анимированную модель. 
Сейчас вы  научитесь создавать их столько сколько сможет обработать ваш компьютер.

<P class="text2">
<B>Задание 19</B><BR>
Для начала вам нужен массив, который будет содержать информацию о моделях. Каждый элемент массива должен 
быть объект класса CUNIT, а размерность массива есть ни что иное, как количество моделей (робо-пауков).
Для этого измените эту запись в коде проекта
<P class="kod">
CUNIT* Model3D = new CUNIT;
<P class="text2">
на эту:
<P class="kod">
//пауки<BR>
const int max_pauk=5;   //количество объектов сцены (Пауков)<BR>
CUNIT* Model3D = new CUNIT[max_pauk]; //объекты пауков<BR>

<P class="text">
В выше приведенном коде, max_pauk – это константа целого типа. Она тут же определена, т.е. 
инициализирована значением 5.<BR> 
Следующая строчка кода есть ни что иное, как создание массива стандартным для С++ методом:
 в начале создается указатель и для него выделяется память определенного размера, столько раз, 
сколько указанно в квадратных скобках.

<P class="text">
Изменения числа объектов класса CUNIT влечет изменение функций InitObjects() и DeleteObject(), 
в которых происходило загрузка модели и освобождение памяти соответственно.<BR> 
Сначала измените функцию InitObjects().

<P class="text2">
<B>Задание 20</B><BR>
Для этого в самом начале этой функции внутри операторных скобок создайте цикл, код которого приведен ниже:
<P class="kod">
for (int i=0; i&lt;max_pauk; i++)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;//здесь происходит загрузка моделей робо-пауков<BR>
}

<P class="text2">
<B>Задание 21</B><BR>
Далее перенесите код
<P class="kod">
HRESULT hRet = Model3D->CreateModelFF("Pauk_run.bma", D3DDevice);	
		if (FAILED(hRet)) {return hRet;};
<P class="text2">
в операторные скобки созданного цикла, изменив при этом в переносимом коде «->» на «[i].».
<BR>В результате должно получиться:
<P class="kod">
for (int i=0; i&lt;max_pauk; i++)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;HRESULT hRet = Model3D[i].CreateModelFF("Pauk_run.bma", D3DDevice);<BR>	
&nbsp;&nbsp;&nbsp;if (FAILED(hRet)) {return hRet;};<BR>
}

<P class="text2">
<B>Задание 22</B><BR>
Аналогично дополните и функцию DeleteObject() изменив код с
<P class="kod">
if (Model3D != NULL)<BR>
&nbsp;&nbsp;&nbsp;Model3D->Release();
<P class="text2">
на 
<P class="kod">
for (int i=0; i&lt;max_pauk; i++)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;Model3D[i].Release();<BR>
}

<P class="text">
Функция Rendering так же должна быть изменена. Ранее она могла сформировать кадр, на котором 
находилась всего лишь одна модель робо-паука. Теперь их много, поэтому, как и в ранее измененных 
функциях загрузки и освобождения памяти, вам понадобиться обрабатывать данные в цикле. Каждая итерация 
цикла обрабатывает одну модель из массива Model3D[i], где i – номер элемента в массиве. В С++ исчисление 
элементов в массиве начинается с 0 поэтому условие при котором цикл работает 0&lt;=i&lt;max_pauk.

<P class="text2">
<B>Задание 23</B><BR>
Добавьте этот же цикл и в функцию Rendering после D3DDevice->SetTransform(D3DTS_VIEW, &matView),
заключив в его операторные скобки приведенный ниже код, заменив «->» на «[i].» только у объекта Model3D:

<P class="kod">
Model3D->Play();<BR>
D3DDevice->Clear( 0, NULL, D3DCLEAR_TARGET|D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(200,200,200), 1.0f, 0 );<BR>
D3DDevice->BeginScene();<BR>	
Model3D->Present();<BR>
D3DDevice->EndScene(); <BR>


<P class="text">
Но если так все и оставить, то после компиляции и запуска проекта на экране вы увидите только одну модель - 
последнюю в массиве. Так произойдет потому, что метод объекта D3DDevice  очистка экрана D3DDevice->Clear будет
при каждом повторении в цикле очищать экран… А вам нужно, чтобы экран очищался не от нового изображения, которое 
формируется в процессе выполнения цикла, а от старого – всего один раз, перед началом формирования нового кадра.
И только тогда вы сможете увидеть на экране не одну модель робо-паука, а несколько!


<P class="text2">
<B>Задание 24</B><BR>
Перенесите метод D3DDevice->Clear чуть выше начала  цикла, в котором он находиться. Тем самым вы добьетесь того, 
что за один вызов функции Rendering, вы вызовите всего один раз метод очистки экрана (вернее сказать, вы очистите 
буфер, в котором располагалась информация о старом изображении).

<P class="text">
Вот и все! Мир фактически создан… Осталось еще немного!
<P class="text">
Ваш мир, в которой будет обитать искусственная нейронная сеть, состоит всего лишь из моделей робо-пауков. 
Не смейтесь! Это минимум.. А впереди вы сможете развить свой проект – создать мир более сложный, наполнить 
его объектами и красками и т.п. Только боюсь, что семи дней как Богу вам не хватит = ) … Но, что поделать…
<P class="text">
Реальный мир состоит из объектов и связей между ними, что есть система. Любой объект имеет свойства и методы, 
говоря на языке программирования, или информацию и энергию, говоря на языке физики. Энергия характеризует связи 
между объектами, но энергия без информации немыслима, т.к. присутствие энергии можно увидеть через смену информации. 
Информация поступает к человеку через органы чувств. Отсюда можно сделать философский вывод,  что мир вокруг человека
не существует вне его сознания.
<P class="text">
Конечно, нельзя не выделить еще и вещество – последняя составляющая триединства материи… Но в нашем случае о 
веществе говорить не стоит т.к. вы моделируете окружающий мир, а не создаете его копию, и поэтому предлагаю 
попросту не учитывать третью составляющую материи. Хотя в конечном счете все выражается через информацию… И 
когда вы изучите настоящий учебник до конца попробуйте ввести такую категорию как вещество и воплотить это программно.
<P class="text">
Итак, информация…. Где она в созданном вами мире? А как о ней можно говорить если не опираться на органы восприятия? 
Ваша нейронная сеть – мозг робо-пауков имеет всего 2 органа восприятия. Назовите их как хотите, но первый из них умеет 
воспринимать тот уровень тонуса или как раньше писалось уровень сил, которым в данный момент обладает робо-паук. 
Второй орган, воспринимает количество других робо-пауков в определенном радиусе вокруг данного робо-паука.

<P class="text2">
<B>Задание 24</B><BR>
Добавте следующие глобальные переменные:
<P class="kod">
float strong[] = {0,0,0,0,0};//силы пауков<BR>
//действие которое в данный момент выполняте паук<BR>
_UACTION action [] = {U_STOP, U_STOP, U_STOP, U_STOP, U_STOP};<BR>
//углы поворотов пауков<BR>
float angle [] = {0,0,0,0,0};<BR>

<P class="text2">
strong, angle и action – это массивы. Каждый элемент массива соотвествует определенному робо-пауку. К 
примеру, strong[0], action [0] и angle [0] есть информация о первом робо-пауке Model3D[0]  и т.п.<BR>
Массив action имеет тип _UACTION описанный в файле Types.cpp.

<P class="text">
На этом настоящий раздел подошел к концу.

<P class="text2">
<B>Задание 25</B><BR>
Сохраните и откомпилируйте проект… Проверте результат работы. Если возникли непреодолимые ошибки возьмите готовы проект 
<A href="files/sozdanie_mira.zip" class="wt">здесь</A> 
и исправьте их.

<P class="title2">Вопросы для  самоконтроля</P>
<P class="text">
1) Использование какого оператор языка С++ помогает отобразить на сцене более одной модели?
<BR>2) Почему вместо указателя на объект модели робо-паука в данной части лабораторной работы вы использовали указатель на массив объектов?
<BR>3) Каким образом можно извлечь данные из указателя на объект класса, а каким образом извлекаются данные из указателя на массив объектов этого же класса? В чем отличие?
<BR>4) Возможно, ли говорить о мире как о системе вне сознания человека?
<BR>5) Через какую категорию выражается мир для человека?


<P align="center">
<A href="impl_neronet.htm" class="wt">назад</A>
<A href="impl.htm" class="wt">далее</A>
</P>

<!--текст окошка к-->
	<P align="right"><A href="#begin" class="wt">наверх</A></P><BR>
	</TD>
	<TD width="5" height="44" valign="bottom"><IMG src="image/8.gif" width="5" height="44" border="0"></TD>
</TR>
<TR>
	<TD width="5" height="1"><IMG src="image/r5.gif" width="5" height="1" border="0"></TD>
	<TD width="*" height="1" bgcolor="#CFDDF2"><IMG src="image/r6.gif" width="1" height="1" border="0"></TD>
	<TD width="5" height="1"><IMG src="image/r5.gif" width="5" height="1" border="0"></TD>
</TR>
</TABLE>
</DIV>
<P class="mini">MR, Кузнецов Алексей КТ-503, РГППУ, 2007г.</P>
<!--содержание к-->
		</TD>
	</TR>
	</TABLE>
	<!--часть содержания к-->
	</TD>
</TR>
<TR>
</TR>
</TABLE>
</BODY>
</HTML>